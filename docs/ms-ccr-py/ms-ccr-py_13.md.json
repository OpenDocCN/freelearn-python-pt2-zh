["```py\n# Chapter13/example1.py\n\ndef writer():\n    global text\n\n    while True:\n        with resource:\n            print(f'Writing being done by \n                   {threading.current_thread().name}.')\n            text += f'Writing was done by \n                    {threading.current_thread().name}. '\n\ndef reader():\n    global rcount\n\n    while True:\n        with rcounter:\n            rcount += 1\n            if rcount == 1:\n                resource.acquire()\n\n        print(f'Reading being done by \n               {threading.current_thread().name}:')\n        print(text)\n\n        with rcounter:\n            rcount -= 1\n            if rcount == 0:\n                resource.release()\n```", "```py\n# Chapter13/example1.py\n\ntext = 'This is some text. '\nrcount = 0\n\nrcounter = threading.Lock()\nresource = threading.Lock()\n\nthreads = [threading.Thread(target=reader) for i in range(3)] + [threading.Thread(target=writer) for i in range(2)]\n\nfor thread in threads:\n    thread.start()\n```", "```py\n> python3 example1.py\nReading being done by Thread-1:\nThis is some text. \nReading being done by Thread-2:\nReading being done by Thread-1:\nThis is some text. \nThis is some text. \nReading being done by Thread-2:\nReading being done by Thread-1:\nThis is some text. \nThis is some text. \nReading being done by Thread-3:\nReading being done by Thread-1:\nThis is some text. \nThis is some text. \n...\n```", "```py\n# Chapter13/example2.py\n\nimport threading\n\ndef writer():\n    global text\n    global wcount\n\n    while True:\n        with wcounter:\n            wcount += 1\n            if wcount == 1:\n                read_try.acquire()\n\n        with resource:\n            print(f'Writing being done by \n                  {threading.current_thread().name}.')\n            text += f'Writing was done by \n                  {threading.current_thread().name}. '\n\n        with wcounter:\n            wcount -= 1\n            if wcount == 0:\n                read_try.release()\n\ndef reader():\n    global rcount\n\n    while True:\n        with read_try:\n            with rcounter:\n                rcount += 1\n                if rcount == 1:\n                    resource.acquire()\n\n            print(f'Reading being done by \n                  {threading.current_thread().name}:')\n            print(text)\n\n            with rcounter:\n                rcount -= 1\n                if rcount == 0:\n                    resource.release()\n\ntext = 'This is some text. '\nwcount = 0\nrcount = 0\n\nwcounter = threading.Lock()\nrcounter = threading.Lock()\nresource = threading.Lock()\nread_try = threading.Lock()\n\nthreads = [threading.Thread(target=reader) for i in range(3)] + \n           [threading.Thread(target=writer) for i in range(2)]\n\nfor thread in threads:\n    thread.start()\n```", "```py\n> python3 example2.py\nReading being done by Thread-1:\nThis is some text. \nReading being done by Thread-1:\nThis is some text. \nWriting being done by Thread-4.\nWriting being done by Thread-5.\nWriting being done by Thread-4.\nWriting being done by Thread-4.\nWriting being done by Thread-4.\nWriting being done by Thread-5.\nWriting being done by Thread-4.\n...\n```", "```py\n# Chapter13/example3.py\n\ndef writer():\n    global text\n\n    while True:\n        with service:\n            resource.acquire()\n\n        print(f'Writing being done by \n              {threading.current_thread().name}.')\n        text += f'Writing was done by \n              {threading.current_thread().name}. '\n\n        resource.release()\n```", "```py\n# Chapter13/example3.py\n\ndef reader():\n    global rcount\n\n    while True:\n        with service:\n            rcounter.acquire()\n            rcount += 1\n            if rcount == 1:\n                resource.acquire()\n        rcounter.release()\n\n        print(f'Reading being done by \n              {threading.current_thread().name}:')\n        #print(text)\n\n        with rcounter:\n            rcount -= 1\n            if rcount == 0:\n                resource.release()\n```", "```py\n# Chapter13/example3.py\n\ntext = 'This is some text. '\nrcount = 0\n\nrcounter = threading.Lock()\nresource = threading.Lock()\nservice = threading.Lock()\n\nthreads = [threading.Thread(target=reader) for i in range(3)] + [threading.Thread(target=writer) for i in range(2)]\n\nfor thread in threads:\n    thread.start()\n```", "```py\n> python3 example3.py\nReading being done by Thread-3:\nWriting being done by Thread-4.\nReading being done by Thread-1:\nWriting being done by Thread-5.\nReading being done by Thread-2:\nReading being done by Thread-3:\nWriting being done by Thread-4.\n...\n```"]